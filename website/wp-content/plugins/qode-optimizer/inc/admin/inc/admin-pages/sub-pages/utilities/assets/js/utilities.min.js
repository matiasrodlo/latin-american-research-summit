!function(n){"use strict";"object"!=typeof qodefFramework&&(window.qodefFramework={}),qodefFramework.scroll=0,qodefFramework.windowWidth=n(window).width(),qodefFramework.windowHeight=n(window).height(),n(document).ready(function(){s.init()});var s={init:function(){this.mainForm=n("#qodef-utility-start"),this.mainFormActions=[],this.mainFormSubmit="",this.loading="",this.message="",this.mainForm.length&&(this.fetchAllFormSubmitActions(this.mainForm),this.initAction(this.mainForm))},fetchAllFormSubmitActions:function(i){i.length&&(i=i.find('input[type="submit"]')).length&&i.each(function(){s.mainFormActions.push(n(this).attr("name"))})},initAction:function(a){a.length&&a.submit(function(i){i.preventDefault();var i=document.activeElement.name,t=n(document.activeElement),o=t.closest(".qodef-utility-form-action"),e=s.getUtilityParams(i);s.mainFormSubmit=t,s.loading=o.find(".qodef-spinner-loading"),s.message=o.find(".qodef-message"),n('<div id="qodef-dialog"></div>').appendTo("body").html("<div><h5>${utilityParams.confirmationMessage}<br />Are you sure?</h5></div>").dialog({modal:!0,title:e.confirmationTitle,zIndex:1e4,autoOpen:!0,width:"auto",resizable:!1,buttons:{Yes:function(){s.mainFormSubmit.prop("disabled",!0),s.loading.removeClass("qodef-hidden"),s.message.addClass("qodef-hidden");var i=a.data("qo-nonce");e.handler.length&&s[e.handler]({qo_nonce:i}),n(this).dialog("close")},No:function(){n(this).dialog("close")}},close:function(i,t){n(this).remove()}})})},getUtilityParams:function(i){var t={confirmationTitle:"",confirmationMessage:"",handler:""};return s.mainFormActions.includes(i)&&("utility_resolve_optimization_history_issues"===i?(t.confirmationTitle="Resolve Optimization History Issues",t.confirmationMessage="Resolving optimization history issues process is about to start.",t.handler="ajaxResolveOptimizationHistoryIssues"):"utility_delete_optimization_history"===i?(t.confirmationTitle="Optimization History Removal",t.confirmationMessage="Complete optimization history removal process is about to start.",t.handler="ajaxDeleteOptimizationHistory"):"utility_clean_up_optimization_history"===i?(t.confirmationTitle="Optimization History Cleanup",t.confirmationMessage="Optimization history cleanup process is about to start.",t.handler="ajaxCleanUpOptimizationHistory"):"utility_delete_webp_images"===i?(t.confirmationTitle="WebP Images Removal",t.confirmationMessage="WebP images removal process is about to start.",t.handler="ajaxDeleteWebpImages"):"utility_delete_all_webp_images"===i&&(t.confirmationTitle="Complete WebP Images Removal",t.confirmationMessage="Complete WebP images removal process is about to start.",t.handler="ajaxDeleteAllWebpImages")),t},ajaxResolveOptimizationHistoryIssues:function(i){n.ajax({type:"POST",url:ajaxurl,data:{action:"utility_action_resolve_optimization_history_issues",options:i},success:function(i){s.loading.addClass("qodef-hidden"),console.log("Optimization history issues resolution finished!")}})},ajaxDeleteOptimizationHistory:function(i){n.ajax({type:"POST",url:ajaxurl,data:{action:"utility_action_delete_optimization_history",options:i},success:function(i){s.loading.addClass("qodef-hidden"),console.log("Optimization history removal finished!")}})},ajaxCleanUpOptimizationHistory:function(i){n.ajax({type:"POST",url:ajaxurl,data:{action:"utility_action_clean_up_optimization_history",options:i},success:function(i){s.loading.addClass("qodef-hidden"),console.log("Optimization history cleanup finished!")}})},ajaxDeleteWebpImages:function(i){n.ajax({type:"POST",url:ajaxurl,data:{action:"utility_action_delete_webp_images",options:i},success:function(i){s.loading.addClass("qodef-hidden"),console.log("WebP images removal finished!")}})},ajaxDeleteAllWebpImages:function(i){n.ajax({type:"POST",url:ajaxurl,data:{action:"utility_action_delete_all_webp_images",options:i},success:function(i){s.loading.addClass("qodef-hidden"),console.log("Complete WebP images removal finished!")}})}}}(jQuery);